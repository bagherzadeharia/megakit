{% extends "base.html" %}
{% load blog_tags %}
{% load humanize %}
{% load static %}

{% block content %}

<div class="main-wrapper ">
	<section class="page-title bg-1">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="block text-center">
						<span class="text-white">Our blog</span>
						<h1 class="text-capitalize mb-4 text-lg">Blog articles</h1>
						<ul class="list-inline">
							<li class="list-inline-item"><a href="index.html" class="text-white">Home</a></li>
							<li class="list-inline-item"><span class="text-white">/</span></li>
							<li class="list-inline-item"><a href="#" class="text-white-50">Our blog</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>
</div>

<section class="section blog-wrap bg-gray">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
				{% if categoryName %}
					<div class="section-title text-center">
						<h2>{{ categoryName }}</h2>
					</div>
				{% endif %}
				{% if tagName %}
					<div class="section-title text-center">
						<h2>#{{ tagName }}</h2>
					</div>
				{% endif %}
				{% if authorFirstName and authorLastName %}
					<div class="section-title text-center">
						<h2>{{ authorFirstName }} {{ authorLastName }}</h2>
					</div>
				{% endif %}
                <div class="row">
					{% for post in posts %}
						<div class="col-lg-6 col-md-6 mb-5">
							<div class="blog-item">
								<img src="{% static 'images/blog/1.jpg' %}" alt="" class="img-fluid rounded">
								<div class="blog-item-content bg-white p-4">
									<div class="blog-item-meta  py-1 px-2">
										<span class="text-muted text-capitalize mr-3"><i class="ti-pencil-alt mr-2"></i><a href="{% url 'blog:author' post.author.username %}">{{ post.author.first_name }} {{ post.author.last_name }}</a></span>
									</div> 
									<h3 class="mt-3 mb-3"><a href="{% url 'blog:single' postID=post.id %}">{{ post.title }}</a></h3>
									<p class="mb-4">{{ post.content|truncatewords:20 }}</p>
									<a href="{% url 'blog:single' postID=post.id %}" class="btn btn-small btn-main btn-round-full">Learn More</a>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
            </div>
            <div class="col-lg-4">
                <div class="sidebar-wrap">
					{% include 'blog/blog-search.html' %}

					{% include 'blog/blog-writer.html' %}

					{% latest_posts %}

					{% category %}
				</div>
            </div>   
        </div>

        <div class="row mt-5">
            <div class="col-lg-8">
                <nav class="navigation pagination py-2 d-inline-block">
                    <div class="nav-links">
                        {% if posts.has_previous %}
                        	<a class="prev page-numbers" href="?page={{ posts.previous_page_number }}">Prev</a>
                        {% endif %}
						{% for i in posts.paginator.page_range %}
                            {% if posts.number == i %}
                        		<span aria-current="page" class="page-numbers current">{{ i }}</span>
                            {% else %}
                        		<a class="page-numbers" href="?page={{ i }}">{{ i }}</a>
                            {% endif %}
                        {% endfor %}
                        {% if posts.has_next %}
							<a class="next page-numbers" href="?page={{ posts.next_page_number }}">Next</a>
						{% endif %}
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>

{% endblock %}